<extend tag="card" for="Area">
  <old-card merge>
  	
    <append-body: >
	<div part="area" id="area-#{this.id}">
	<h5>Objectives</h5>
	<form with="&Hoshin.new" method="GET" id="reorder-#{this.id}" update="area-#{this.id}">
	</form>
	<rtable:objectives columns="#,Objective,Resp." class="objectives" part="objectives" id="objectives-#{this.id}" sortable success="$('#reorder-#{this.id}').submit();"/>
	<a title="Add new objective" onclick="$('#objective-modal-#{this.id}').modal('show'); $('#add-objective-modal-#{this.id} form').trigger('reset'); return false;">Add new objective</a>
	<modal id="add-objective-modal-#{this.id}">
		<modal:>
		<set options="&this.parent_objectives"/>
		<set hid="#{this.hoshin.id}"/>
		<set aid="#{this.id}"/>
		<set comp="&this.company"/>
		<form with="&Objective.new" update="objectives-#{this.id}" success="$('#add-objective-modal-#{this.id}').modal('hide'); $('.modal-backdrop').remove(); colorize();" class="modal">
			<div class="modal-body">
				<field-list: fields="name, description, responsible, parent">
					<parent-tag: options="&options" />
				    	<responsible-view:>
						<name-one complete-target="&comp" completer="users"/>
					</responsible-view:>
				</field-list:>
				<hidden-field:hoshin_id value="#{hid}"/>
				<hidden-field:area_id value="#{aid}"/>
			</div>
			<modal-form-footer/>
		</form>
		</modal:>
	</modal>
	<h5>KPIs</h5>
	<rtable:indicators columns="#,KPI,Resp.,Value,Goal,%" part="indicators" id="indicators-#{this.id}" class="indicators" sortable/>
	<h5>Tasks</h5>
	<rtable:tasks columns="#,Task,Resp.,Deadline,Dev,Status" part="tasks" id="tasks-#{this.id}" class="tasks" sortable/>
	<h5>Child Tasks</h5>
	<rtable:child_tasks columns="#,Task,Resp.,Deadline,Dev,Hoshin"/>
	</div>
    </append-body:>
  </old-card>
</extend>
